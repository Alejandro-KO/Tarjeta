<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarjeta Especial 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>

    <style>
        :root {
            --neon-pink: #ff00de;
            --gold: #ffd700;
        }

        body {
            background-color: #050505;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100svh;
            overflow: hidden;
        }

        /* Canvas para fuegos artificiales */
        #canvas-fuegos {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            display: none; /* Se activa al final */
        }

        .btn-neon {
            background: transparent;
            color: white;
            border: 2px solid var(--neon-pink);
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            border-radius: 10px;
            box-shadow: 0 0 10px var(--neon-pink);
            transition: 0.3s;
            text-shadow: 0 0 5px var(--neon-pink);
            z-index: 10;
        }

        .btn-neon:hover {
            background: var(--neon-pink);
            box-shadow: 0 0 30px var(--neon-pink);
        }

        .pantalla {
            display: none; 
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 20px;
            width: 90%;
            z-index: 5;
        }

        .activa {
            display: flex; 
        }

        .Presentacion {
            font-size: 1.8rem;
            margin-bottom: 30px;
            text-shadow: 0 0 5px var(--neon-pink), 0 0 15px var(--neon-pink);
            font-family: 'Dancing Script', cursive;
            line-height: 1.6;
        }

        #typed {
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 0 0 5px var(--neon-pink), 0 0 15px var(--neon-pink);
            font-family: 'Dancing Script', cursive;
        }

        /* Estilos Año Nuevo */
        .celebracion h1 {
            font-size: 3.5rem;
            margin: 0;
            text-shadow: 0 0 20px var(--gold);
            color: white;
        }

        .celebracion h2 {
            font-size: 6rem;
            margin: 0;
            background: linear-gradient(to bottom, var(--gold), #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body>

    <canvas id="canvas-fuegos"></canvas>

    <div id="pantalla1" class="pantalla">
        <button class="btn-neon" onclick="cambiarPantalla(2)">
            INICIO
        </button>
    </div>

    <div id="pantalla2" class="pantalla">
        <p class="Presentacion">
            Este es un mensaje especial para Gaby, una chica muy hermosa que
            tiene una sonrisa que brilla para iluminar hasta el dia mas oscuro.
        </p>
        <button class="btn-neon" onclick="iniciarMensaje()">
            Leer Mensaje
        </button>
    </div>

    <div id="pantalla3" class="pantalla">
        <div id="typed"></div>
    </div>

    <div id="pantalla-celebracion" class="pantalla celebracion">
        <h1>¡FELIZ AÑO NUEVO!</h1>
        <h2>2026</h2>
        <!-- <p style="font-size: 1.5rem; color: var(--gold);">Para Gaby</p> -->
    </div>

    <script>
        const ID_MISION = "mision_año_nuevo_2026"; 

        window.onload = function() {
            const estadoMision = localStorage.getItem("estado_mision");
            if (estadoMision === ID_MISION) {
                activarFuegos();
                cambiarPantalla('99'); // Ir directo a la celebración si ya se vio
            } else {
                document.getElementById('pantalla1').classList.add('activa');
            }
        };

        function cambiarPantalla(n) {
            document.querySelectorAll('.pantalla').forEach(p => p.classList.remove('activa'));
            if(n === '99') {
                document.getElementById('pantalla-celebracion').classList.add('activa');
            } else {
                document.getElementById('pantalla' + n).classList.add('activa');
            }
        }

        function iniciarMensaje() {
            cambiarPantalla(3);
            new Typed('#typed', {
                strings: [
                    'El año esta por terminar y quisiera tomar un momento para desearte un feliz año nuevo^1000',
                    'Si bien no tuve la fortuna de conocerte como hubiera querido^1000',
                    'Lo poco que vi de ti fue suficiente para ver que eres una persona maravillosa^1000',
                    'El esfuerzo que pones en lo que haces^1000',
                    'Tu manera de ser, de actuar y de contagiar esa alegría tuya^1000',
                    'Son cosas que te van a llevar a lograr cosas increíbles no tengo dudas^1000',
                    'Y espero que en este año sigas logrando tus metas^1000',
                    'Cumplas tus sueños y sigas saliendo adelante^1000',
                    'No me queda mas que desearte un excelente año nuevo^1000',
                    'Que este lleno de salud y estes siempre rodeada de tus seres queridos^1000',
                    'Te dejo un fuerte abrazo y mis mejores deseos^1000',
                    'il tuo sorriso è il mio vizio preferito^100'
                    , 
                ],
                typeSpeed: 50,
                onComplete: (self) => {
                    localStorage.setItem("estado_mision", ID_MISION);
                    setTimeout(() => {
                        document.getElementById('pantalla3').innerHTML = "";
                        activarFuegos();
                        cambiarPantalla('99');
                    }, 1500);
                }
            });
        }

        // --- LÓGICA DE FUEGOS ARTIFICIALES ---
        const canvas = document.getElementById('canvas-fuegos');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function activarFuegos() {
            canvas.style.display = "block";
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            animate();
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                this.velocity = { x: (Math.random() - 0.5) * 8, y: (Math.random() - 0.5) * 8 };
                this.alpha = 1;
                this.friction = 0.95;
            }
            draw() {
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
            }
            update() {
                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= 0.01;
            }
        }

        function createFirework() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * (canvas.height * 0.6);
            const color = `hsl(${Math.random() * 360}, 100%, 60%)`;
            for (let i = 0; i < 80; i++) particles.push(new Particle(x, y, color));
        }

        function animate() {
            requestAnimationFrame(animate);
            ctx.fillStyle = 'rgba(5, 5, 5, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => {
                if (p.alpha > 0) { p.update(); p.draw(); }
                else { particles.splice(i, 1); }
            });
            if (Math.random() < 0.04) createFirework();
        }
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CXCVZGRXBZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-CXCVZGRXBZ');
    </script>
</body>
</html>
